<Window x:Class="TPV_Gastronomico.Views.ReservasWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Gestión de Reservas" Height="700" Width="900"
        WindowStartupLocation="CenterScreen">
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- Header -->
		<StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10" Background="LightBlue">
			<TextBlock Text="Gestión de Reservas" FontSize="20" FontWeight="Bold" Margin="10"/>
			<TextBlock x:Name="txtTitulo" FontSize="14" Margin="20,0,0,0" VerticalAlignment="Center"/>
		</StackPanel>

		<!-- Contenido principal -->
		<TabControl Grid.Row="1" Margin="10">
			<!-- Pestaña: Mis Reservas -->
			<TabItem Header="Reservas">
				<Grid>
					<Grid.RowDefinitions>
						<RowDefinition Height="*"/>
						<RowDefinition Height="Auto"/>
					</Grid.RowDefinitions>

					<DataGrid x:Name="dgMisReservas" AutoGenerateColumns="False" Margin="10"
                             SelectionMode="Single" Grid.Row="0">
						<DataGrid.Columns>
							<DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
							<DataGridTextColumn Header="Mesa" Binding="{Binding Mesa.Numero}" Width="80"/>
							<DataGridTextColumn Header="Fecha" Binding="{Binding Fecha, StringFormat=dd/MM/yyyy HH:mm}" Width="120"/>
							<DataGridTextColumn Header="Tipo Comida" Binding="{Binding Tipo}" Width="100"/>
							<DataGridTextColumn Header="Nº Personas" Binding="{Binding NumPersonas}" Width="80"/>
							<DataGridTextColumn Header="Usuario" Binding="{Binding Usuario.Nombre}" Width="120"/>
							<DataGridTemplateColumn Header="Acciones" Width="150">
								<DataGridTemplateColumn.CellTemplate>
									<DataTemplate>
										<StackPanel Orientation="Horizontal">
											<Button Content="Cancelar" Click="BtnCancelarReserva_Click"
                                                    Margin="2" Padding="5" Background="Red" Foreground="White"
                                                    ToolTip="Cancelar esta reserva"/>
										</StackPanel>
									</DataTemplate>
								</DataGridTemplateColumn.CellTemplate>
							</DataGridTemplateColumn>
						</DataGrid.Columns>
					</DataGrid>

					<StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="10">
						<Button Content="Actualizar" Click="BtnActualizar_Click" Margin="5" Width="80"/>
					</StackPanel>
				</Grid>
			</TabItem>

			<!-- Pestaña: Nueva Reserva -->
			<TabItem Header="Nueva Reserva">
				<Grid>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="Auto"/>
					</Grid.ColumnDefinitions>

					<StackPanel Grid.Column="0" Margin="20" Width="350">
						<Label Content="Fecha:" FontWeight="Bold"/>
						<DatePicker x:Name="dpFecha" SelectedDate="{Binding Fecha}" Margin="0,5,0,10"/>

						<Label Content="Hora:" FontWeight="Bold"/>
						<StackPanel Orientation="Horizontal" Margin="0,5,0,10">
							<ComboBox x:Name="cbHora" Width="80" SelectedIndex="0">
								<ComboBoxItem Content="13:00"/>
								<ComboBoxItem Content="14:00"/>
								<ComboBoxItem Content="15:00"/>
								<ComboBoxItem Content="20:00"/>
								<ComboBoxItem Content="21:00"/>
								<ComboBoxItem Content="22:00"/>
							</ComboBox>
							<ComboBox x:Name="cbMinuto" Width="0" Margin="10,0,0,0" SelectedIndex="0">
								<ComboBoxItem Content="00"/>
								<ComboBoxItem Content="15"/>
								<ComboBoxItem Content="30"/>
								<ComboBoxItem Content="45"/>
							</ComboBox>
						</StackPanel>

						

						<Label Content="Número de Personas:" FontWeight="Bold"/>
						<TextBox x:Name="txtNumPersonas" Text="2" Margin="0,5,0,10"/>

						<Label Content="Mesa:" FontWeight="Bold"/>
						<ComboBox x:Name="cbMesa" DisplayMemberPath="Numero"
                                 ToolTipService.ToolTip="{Binding Capacidad, StringFormat=Capacidad: {0} personas}"
                                 Margin="0,5,0,10"/>

						<TextBlock x:Name="txtInfoMesa" Margin="0,5,0,10" Foreground="Blue" FontWeight="SemiBold"/>

						<Button Content="Buscar Mesas Disponibles" Click="BtnBuscarMesas_Click"
                                Margin="0,10,0,5" Background="LightGreen" FontWeight="Bold" Height="30"/>
						<Button Content="Crear Reserva" Click="BtnCrearReserva_Click"
                                Margin="0,5,0,0" Background="Green" Foreground="White" FontWeight="Bold" Height="35"/>
					</StackPanel>
                    <ComboBox x:Name="cbTipoComida" DisplayMemberPath="Value" SelectedValuePath="Key" Margin="0,0,0,0" Width="0"/>

					<Border Grid.Column="1" BorderBrush="Gray" BorderThickness="1" Margin="10" Background="WhiteSmoke">
						<StackPanel Margin="10" Width="300">
							<TextBlock Text="Información de Mesas Disponibles" FontWeight="Bold" Margin="0,0,0,10"/>
							<DataGrid x:Name="dgMesasDisponibles" AutoGenerateColumns="False" Height="300">
								<DataGrid.Columns>
									<DataGridTextColumn Header="Mesa" Binding="{Binding Numero}" Width="60"/>
                                    <DataGridTextColumn Header="Capacidad" Binding="{Binding Capacidad}" Width="80"/>
                                </DataGrid.Columns>
							</DataGrid>
						</StackPanel>
					</Border>
				</Grid>
			</TabItem>
		</TabControl>

		<!-- Footer -->
		<StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="10">
			<Button Content="Cerrar" Click="BtnCerrar_Click" Margin="5" Width="80"/>
		</StackPanel>
	</Grid>
</Window>